# we have three logging considerations:
# 1. Everything goes to ioncontainer.log which gets rotated
# 2. >=ERROR goes to STDERR where supervisord will capture it
# 3. cloudyvents go to a separate file to ease parsing and to ensure they are
#    not rotated away.


[loggers]
keys=root,cloudyvents

[handlers]
keys=tracefileHandler,errorHandler,eventHandler

[formatters]
keys=fileFormatter,simpleFormatter

[logger_root]
level=DEBUG
handlers=tracefileHandler,errorHandler

[logger_cloudyvents]
level=WARNING
handlers=eventHandler
qualname=epu.cei_events

[handler_errorHandler]
class=StreamHandler
level=ERROR
formatter=simpleFormatter
args=(sys.stderr,)

[handler_eventHandler]
class=FileHandler
level=WARNING
formatter=fileFormatter
args=('logs/<%= @service_name %>/cloudyvents.log', 'a')
filename=logs/<%= @service_name %>/cloudyvents.log
mode=a

[handler_tracefileHandler]
class=handlers.RotatingFileHandler
level=DEBUG
formatter=fileFormatter
args=('logs/<%= @service_name %>/ioncontainer.log', 'a', 10*1024*1024, 3)
filename=logs/<%= @service_name %>/ioncontainer.log
mode=a

[formatter_simpleFormatter]
format=%(asctime)s,%(msecs)03d [%(module)-15s:%(lineno)3d] %(levelname)-5s:%(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_fileFormatter]
format=%(asctime)s,%(msecs)03d [%(module)-15s:%(lineno)3d] %(levelname)-5s:%(message)s
datefmt=%Y-%m-%d %H:%M:%S
